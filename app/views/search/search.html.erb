<div class="container mt-5">
  <div class="pricing-header p-3 pb-md-4 mx-auto text-center">
    <h1 class="display-4 fw-normal text-body-emphasis">Welcome To Datas</h1>
    <p class="fs-5 text-body-secondary">Enter Details To Search</p>
  </div>

  <div class="container d-flex align-items-center justify-content-center">
    <%= form_tag(search_path, method: :get, class: "search-form") do %>
      <div class="inner-form">
        <div class="input-group">
          <%= text_field_tag(:query, params[:query], class: "form-control", placeholder: "Enter ID to search") %>
          <%= text_field_tag(:column_name, params[:column_name], class: "form-control", placeholder: "Enter column name") %>
          <%= submit_tag('Search', class: "btn btn-warning") %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="search-results m-5 text-dark p-5">
    <% if @results.present? %>
      <h3>Result I:</h3>
      <ul>
        <% @results.each do |result| %>
          <li>
            <strong>Name:</strong> <%= result['name']&.first %>
          </li>
          <br>
          <li>
            <strong>Phone:</strong> <%= result['phone_no']&.first %>
          </li>
          <br>
          <li>
            <strong>Mail:</strong> <%= result['email']&.first %>
          </li>
          <br>
        <% end %>
      </ul>
      <h3>Result II:</h3>
      <ul>
        <% @results.each do |result| %>
          <% if params[:column_name].present? %>
            <% column_name = params[:column_name].to_s.downcase %>
            <% if result.key?(column_name) %>
              <li>
                <strong><%= params[:column_name].titleize %>:</strong> <%= result[column_name].first %>
              </li>
              <br>
            <% end %>
          <% end %>
        <% end %>
      </ul>
    <% else %>
      <p>No results found.</p>
    <% end %>
  </div>
</div>
